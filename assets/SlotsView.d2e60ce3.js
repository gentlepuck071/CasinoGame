import{_ as m,o as p,c as d,r,a as u,n as x,b as o,t as h,F as w,d as S,e as b}from"./index.7bd5a6e6.js";import{T as B,B as v}from"./ToastNotification.e78c39a5.js";import{I as V}from"./InfoComponent.79d9de3a.js";const A={props:["slotValues"],methods:{spin(n){const s=this.$refs.slotValue,e=[...this.$props.slotValues];let i=null;return s.classList.add("spinning"),s.classList.remove("spun"),new Promise(t=>{function l(){if(n<=0)return s.classList.add("spun"),s.classList.remove("spinning"),t(s.innerText);const a=Math.floor(Math.random()*e.length);i!==null&&e.push(i),s.innerText=e[a],i=e[a],e.splice(a,1),setTimeout(l,100,--n)}l()})}}},R={ref:"slotValue",id:"slotValue",class:"text-center w-14 bg-neutral text-primary p-5 rounded-xl font-black text-xl"};function T(n,s,e,i,t,l){return p(),d("div",R," $ ",512)}const $=m(A,[["render",T],["__scopeId","data-v-a400e948"]]),y={props:["points"],data(){return{slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],lastPlacedBet:0,lastReward:0,autospinning:!1,buttonSound:new Audio("spin.mp3"),end:!1}},components:{ToastNotification:B,SlotComponent:$,BetSelectButton:v,InfoComponent:V},methods:{spinSlots(n,s=[]){if(n===1){if(this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$props.points-this.lastPlacedBet<0){this.autospinning=!1;return}this.$emit("changePoints",-this.lastPlacedBet),this.buttonSound.play()}else if(n>this.slotAmount){this.spinning=!1,this.calculateReward(s);return}this.spinning=!0,this.$refs["slot"+n][0].spin(this.slotSpinTimes).then(e=>{s.push(e),this.spinSlots(n+1,s)})},calculateReward(n){const s=n.reduce((i,t)=>i.set(t,(i.get(t)||0)+1),new Map);let e=0;s.get("$")===this.slotAmount?e=this.lastPlacedBet*5:s.get("7")===this.slotAmount?e=this.lastPlacedBet*7:s.get("=")>=2&&(e=this.lastPlacedBet*2),this.end=!0,this.lastReward=e,this.$emit("changePoints",e),setTimeout(()=>{this.end=!1},3e3)}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinSlots(1)},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinSlots,500,1)}}},P={class:"flex min-h-screen w-screen justify-center items-center transition-all"},M={class:"flex flex-col w-5/6 sm:w-2/3 items-center gap-5"},k={class:"flex flex-col items-center"},C=o("h2",{class:"text-[2em]"},"Slots",-1),I={id:"lastReward",class:"font-mono"},L={id:"slotSpace",class:"pt-3 flex justify-center gap-5 w-full"},N={id:"options",class:"flex flex-col sm:flex-row flex-wrap justify-center gap-3 trans"},F={class:"btn-group btn-group-horizontal"},j=["disabled"];function O(n,s,e,i,t,l){const a=r("ToastNotification"),f=r("SlotComponent"),_=r("BetSelectButton"),g=r("InfoComponent");return p(),d("main",P,[u(a,{message:"You earned "+t.lastReward+" points!",class:x(["transition-all",t.end?"translate-x-0":"translate-x-96"])},null,8,["message","class"]),o("div",M,[o("div",k,[C,o("p",I,"Last reward: "+h(t.lastReward),1)]),o("div",L,[(p(!0),d(w,null,S(t.slotAmount,c=>(p(),b(f,{key:c,slotValues:t.slotValues,ref_for:!0,ref:String("slot"+c),class:"slot"},null,8,["slotValues"]))),128))]),o("div",N,[u(_,{bets:t.slotBets,disabled:t.spinning||t.autospinning,id:"betSelect",ref:"betSelect"},null,8,["bets","disabled"]),o("div",F,[o("button",{class:"btn btn-primary transition-all w-1/2",onClick:s[0]||(s[0]=c=>l.spinSlots(1)),ref:"spinButton",disabled:t.spinning||t.autospinning},h(t.spinning||t.autospinning?"Spinning...":"Spin"),9,j),o("button",{class:"btn",onClick:s[1]||(s[1]=c=>t.autospinning=!t.autospinning),id:"autospinButton"},h(t.autospinning?"Stop":"Autospin"),1)])]),u(g,{elements:[{title:"$$$",value:(1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2)+"%",desc:"Reward: Original bet x 5"},{title:"777",value:(1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2)+"%",desc:"Reward: Original bet x 7"},{title:"==",value:((1-(Math.pow(this.slotValues.length-1,this.slotAmount)+Math.pow(this.slotValues.length-1,this.slotAmount-1)*this.slotAmount)/Math.pow(this.slotValues.length,this.slotAmount))*100).toFixed(2)+"%",desc:"Reward: Original bet x 2"}]},null,8,["elements"])])])}const D=m(y,[["render",O]]);export{D as default};
